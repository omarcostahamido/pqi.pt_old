$.expr[":"].contains=$.expr.createPseudo(function(e){return function(t){return $(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}});var search=new Array;!function(e){e.fn.niceSelect=function(t,s){var i={};if(i.settings=e.extend({},{height:"auto"},s),"string"==typeof t)return"update"==t?this.each(function(){var t=e(this),s=e(this).next(".nice-select"),i=s.hasClass("open");s.length&&(s.remove(),n(t),i&&t.next().trigger("click"))}):"destroy"==t?(this.each(function(){var t=e(this),s=e(this).next(".nice-select");s.length&&(s.remove(),t.css("display",""))}),0==e(".nice-select").length&&e(document).off(".nice_select")):console.log('Method "'+t+'" does not exist.'),this;function n(t){var s="";if(""!=i.settings.items&&"auto"!=i.settings.items)s="style='max-height:"+40*i.settings.items+"px;overflow-y:auto'";t.after(e("<div></div>").addClass("nice-select").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list" '+s+"></ul>"));var n=t.next(),o=t.find("option"),l=t.find("option:selected");n.find(".current").html(l.data("display")||l.text()),o.each(function(t){var s=e(this),i=s.data("display"),o=s.data("display")||s.text();n.find("ul").append(e("<li></li>").attr("data-value",s.val()).attr("data-display",i||null).addClass("option"+(s.is(":selected")?" selected":"")+(s.is(":disabled")?" disabled":"")).html(o))})}this.hide(),this.each(function(){var t=e(this);t.next().hasClass("nice-select")||n(t)}),e(document).off(".nice_select"),e(document).on("click.nice_select",".nice-select",function(t){var s=e(this);if(search=new Array,e(".nice-select").not(s).removeClass("open"),s.toggleClass("open"),s.hasClass("open")){s.find(".option"),s.find(".focus").removeClass("focus"),s.find(".selected").addClass("focus");var i=e(window).height(),n=s.offset().top;s.find(".list").height()+8+n+s.height()-e(window).scrollTop()>i?s.find(".list").css("top","-"+(s.find(".list").height()+8)+"px"):s.find(".list").css("top","100%")}else s.focus()}),e(document).on("click.nice_select",function(t){0===e(t.target).closest(".nice-select").length&&e(".nice-select").removeClass("open").find(".option")}),e(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(t){var s=e(this),i=s.closest(".nice-select");i.find(".selected").removeClass("selected"),s.addClass("selected");var n=s.data("display")||s.text();i.find(".current").html(n),i.prev("select").val(s.data("value")).trigger("change")}),e(document).on("keydown.nice_select",".nice-select",function(t){var s=e(this),n=e(s.find(".focus")||s.find(".list .option.selected"));if(32==t.keyCode||13==t.keyCode)return s.hasClass("open")?n.trigger("click"):s.trigger("click"),!1;if(40==t.keyCode){if(s.hasClass("open"))(l=n.nextAll(".option:not(.disabled)").first()).length>0&&(s.find(".focus").removeClass("focus"),l.addClass("focus"),""!=i.settings.items&&"auto"!=i.settings.items&&TweenLite.to(n.closest("ul"),1,{scrollTo:{y:40*l.index()},ease:Power2.easeOut,onComplete:function(){}}));else s.trigger("click");return!1}if(38==t.keyCode){if(s.hasClass("open")){var o=n.prevAll(".option:not(.disabled)").first();o.length>0&&(s.find(".focus").removeClass("focus"),o.addClass("focus"),""!=i.settings.items&&"auto"!=i.settings.items&&TweenLite.to(n.closest("ul"),1,{scrollTo:{y:40*o.index()},ease:Power2.easeOut,onComplete:function(){}}))}else s.trigger("click");return!1}if(27==t.keyCode)s.hasClass("open")&&s.trigger("click");else if(9==t.keyCode){if(s.hasClass("open"))return!1}else if(t.keyCode>=65&&t.keyCode<=90){search.push(String.fromCharCode(t.keyCode));var l,a=search.join(""),c=n.closest("ul").find("li:contains('"+a+"')");if(c.length>0)(l=c.first()).length>0&&(s.find(".focus").removeClass("focus"),l.addClass("focus"),""!=i.settings.items&&"auto"!=i.settings.items&&TweenLite.to(n.closest("ul"),1,{scrollTo:{y:40*l.index()},ease:Power2.easeOut,onComplete:function(){}}))}});var o=document.createElement("a").style;return o.cssText="pointer-events:auto","auto"!==o.pointerEvents&&e("html").addClass("no-csspointerevents"),this}}(jQuery);